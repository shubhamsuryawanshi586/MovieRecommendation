package org.moviefusion.swagger;

import java.awt.Desktop;
import java.io.IOException;
import java.net.URI;

import org.springframework.context.annotation.Configuration;

import io.swagger.v3.oas.annotations.OpenAPIDefinition;
import io.swagger.v3.oas.annotations.info.Info;

@Configuration
@OpenAPIDefinition(
    info = @Info(
        title = "Movie Fusion API",
        version = "1.0",
        description = "API documentation for MovieFusion Application"
    )
)
public class SwaggerConfigs {
	private static boolean swaggerOpened = false;

	public static void openSwaggerUI() {
		if (swaggerOpened) return; 
		String url = "http://localhost:8080/swagger-ui.html";

        try {
            if (Desktop.isDesktopSupported() && Desktop.getDesktop().isSupported(Desktop.Action.BROWSE)) {
                Desktop.getDesktop().browse(new URI(url));
                String os = System.getProperty("os.name").toLowerCase();
                try {
                    if (os.contains("win")) { 
                        new ProcessBuilder("cmd", "/c", "start chrome " + url).start();
                    }
                    swaggerOpened = true;
                } catch (IOException e) { 
                    e.printStackTrace();
                }
            }
            swaggerOpened = true;
        } catch (Exception e) { 
            e.printStackTrace();
        }
	}
}
